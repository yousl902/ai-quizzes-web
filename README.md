# 🧠 Modular Quiz Web App

This is a customizable and modular web application for hosting quizzes generated by an external AI service. The app is designed for easy deployment and configuration using environment variables and a single configuration file, with support for Supabase authentication out of the box.

## ✨ Features

- 🔧 Modular and themeable — change `siteConfig.ts` to fully customize content and colors
- 🔐 Optional Supabase authentication using a strategy pattern
- 🧩 Easily replace Supabase with your own auth implementation
- ⚙️ Prisma ORM for database access and migrations
- 📦 Ready to deploy with environment templates
- 🔗 Connects to a separate AI backend to generate quizzes

## 📁 Project Structure

```
/app             # App routes and pages
/components      # Shared components
/lib             # Utility functions and auth strategies
/prisma          # Database schema
/configs         # Static content, translations, themes, and colors
.env.example     # Template for environment variables
```

## 🚀 Getting Started

### 1. Clone the repository

```bash
git clone https://github.com/Studycomb/hp-web
cd hp-web
```

### 2. Install dependencies

```bash
npm install
```

### 3. Set up environment variables

Copy the example files:

```bash
cp .env.example .env
cp .env.local.example .env.local
```

Then edit `.env`:

```env
DATABASE_URL=""
DIRECT_URL=""
```

And edit `.env.local`:

```env
NEXT_PUBLIC_USE_AUTH=supabase
QUIZ_UPLOAD_SECRET=hahaha                 # Must match the AI backend repo
NEXT_PUBLIC_SITE_URL=http://localhost:3000

# Supabase specific (optional if using your own auth)
NEXT_PUBLIC_SUPABASE_URL=
NEXT_PUBLIC_SUPABASE_ANON_KEY=
```

> **Note:** `QUIZ_UPLOAD_SECRET` must be the same in both this app and the AI quiz generator repo, so the AI service can securely upload quizzes.

### 4. Generate Prisma client

```bash
npx prisma generate --schema=./prisma/schema
```

### 5. Set up your database

```bash
npx prisma migrate dev --name init --schema=./prisma/schema
```

## 🛠️ Customization

You can customize your site without touching the code by editing the files under `configs`:

- `locales/en.json`, `locales/sv.json` — translations and static text
- `assets.json` — images, logos, and media paths  
  > ⚠️ **Note:** We recommend that the `errorGif` asset has either:
  > - a transparent background, or  
  > - the same background color as the error page,  
  > to maintain visual consistency.
- `colors.json` — theme and color palette for the site


## 🧠 Auth Strategy

The app uses a **strategy design pattern** to support multiple authentication backends. By default, it supports **Supabase**, but you can implement your own strategy by following the existing interface.

Set your strategy via:

```env
NEXT_PUBLIC_USE_AUTH=supabase
```

To implement a custom strategy:

1. Create a file in `lib/auth/strategies/`
2. Implement the same interface as the `supabase` strategy
3. Register your strategy in the factory

> All frontend components use the shared interface and do not depend on Supabase directly.

## 🌐 API Communication with AI

This web app includes a secure API endpoint that receives quiz data from the AI service. The endpoint is protected using a shared secret (`QUIZ_UPLOAD_SECRET`), which must match between this repo and the AI quiz generator repo.

The AI backend sends a `POST` request with the secret and quiz data to this app, which stores the quizzes in your database using Prisma.

## 🧪 Tech Stack

- Next.js
- Supabase (optional)
- Prisma
- TypeScript
- Tailwind CSS
- Strategy Pattern for Auth

## 📄 License

MIT — feel free to use and modify.

## 🔮 Future Work

- 🌍 **Translation support for dynamic data**  
  Currently, only static text is translated. We plan to add translation support for data fetched from the database, such as quiz content.

- 🖼️ **Image support in quizzes**  
  Extend the quiz format to support image-based questions and options.

